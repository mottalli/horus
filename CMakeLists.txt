CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT(HORUS)

OPTION(USE_CUDA "Use CUDA acceleration" OFF)

IF (WIN32)
	FIND_PACKAGE(OpenCV)
ELSE (WIN32)
	FIND_PACKAGE(PkgConfig)
	PKG_CHECK_MODULES(OPENCV opencv)
	SET(OpenCV_LIBS ${OPENCV_LIBRARIES})
ENDIF (WIN32)
	
IF (USE_CUDA)
	FIND_PACKAGE(CUDA)
	IF (CUDA_FOUND)
		ADD_DEFINITIONS("-DUSE_CUDA")
	ELSE (CUDA_FOUND)
		SET(USE_CUDA OFF)
	ENDIF (CUDA_FOUND)
ENDIF (USE_CUDA)

ADD_SUBDIRECTORY(python_interface)
ADD_SUBDIRECTORY(src)
ADD_SUBDIRECTORY(test)

CONFIGURE_FILE(
  "${CMAKE_CURRENT_SOURCE_DIR}/cmake_uninstall.cmake.in"
  "${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake"
  IMMEDIATE @ONLY)

ADD_CUSTOM_TARGET(uninstall
  "${CMAKE_COMMAND}" -P "${CMAKE_CURRENT_BINARY_DIR}/cmake_uninstall.cmake")
